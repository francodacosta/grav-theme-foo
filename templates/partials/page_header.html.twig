<nav class="navbar navbar-expand-lg  sticky-top w-100 p-3 mb-5">
    <div class="container">
        <a class="navbar-brand" href="{{ base_url == '' ? '/' : base_url }}">
            {% set logo_dark = theme.logo_dark|first %}
            {% set logo_light = theme.logo_light|first %}


            <img class="logo_dark" src="{{ url("theme://images/" ~ logo_dark.name) }}" alt="{{ site.title }}">
            <img class="logo_light" src="{{ url("theme://images/" ~ logo_light.name) }}" alt="{{ site.title }}">
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa-solid fa-bars"></i>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                {% for page in pages.children.visible %}
                    {% set current_page = (page.active or page.activeChild) ? 'active' : '' %}
                    {% if config.themes.bootstrap.dropdown.enabled and page.children.visible.count > 0 %}
                        <li class="dropdown {{ current_page }}">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ page.menu }}
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                {% set current_parent = page.active ? 'active' : '' %}
                                <li class="{{ current_parent }}">
                                    <a class="nav-item" href="{{ page.url }}">{{ page.menu }}</a>
                                </li>
                                <li class="divider"></li>
                                {% for child in page.children.visible %}
                                    {% set current_child = (child.active or child.activeChild) ? 'active' : '' %}
                                    <li class="{{ current_child }}">
                                        <a class="nav-item" href="{{ child.url }}">{{ child.menu }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% else %}
                        <li class="{{ current_page }}">
                            <a class="nav-item {{ current_page }}" href="{{ page.url }}">{{ page.menu }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
                {% for mitem in site.menu %}
                    <li>
                        <a class="nav-item {{ current_page }}" href="{{ mitem.url }}">{{ mitem.text }}</a>
                    </li>
                {% endfor %}

                {% if config.plugins.login.enabled and grav.user.username %}
                    <li>
                        <i class="fa fa-lock"></i>
                        {% include 'partials/login-status.html.twig' %}</li>
                {% endif %}
            </ul>
        </div>
    </nav>


    <div class="navbar-header">
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                {% for page in pages.children.visible %}
                    {% set current_page = (page.active or page.activeChild) ? 'active' : '' %}
                    {% if config.themes.bootstrap.dropdown.enabled and page.children.visible.count > 0 %}
                        <li class="dropdown {{ current_page }}">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">{{ page.menu }}
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                {% set current_parent = page.active ? 'active' : '' %}
                                <li class="{{ current_parent }}">
                                    <a href="{{ page.url }}">{{ page.menu }}</a>
                                </li>
                                <li class="divider"></li>
                                {% for child in page.children.visible %}
                                    {% set current_child = (child.active or child.activeChild) ? 'active' : '' %}
                                    <li class="{{ current_child }}">
                                        <a href="{{ child.url }}">{{ child.menu }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </li>
                    {% else %}
                        <li class="{{ current_page }}">
                            <a href="{{ page.url }}">{{ page.menu }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
                {% for mitem in site.menu %}
                    <li>
                        <a href="{{ mitem.url }}">{{ mitem.text }}</a>
                    </li>
                {% endfor %}

                {% if config.plugins.login.enabled and grav.user.username %}
                    <li>
                        <i class="fa fa-lock"></i>
                        {% include 'partials/login-status.html.twig' %}</li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
