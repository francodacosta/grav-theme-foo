<!DOCTYPE html>
<html lang="{{ grav.language.getActive ?: grav.config.site.default_lang }}">
    <head>
        {% set site_theme = theme.site_theme|default('gold') %}
        {% if page.header.site_theme is defined and page.header.site_theme != 'default' %}
            {% set site_theme = page.header.site_theme %}
        {% endif %}


        {% block head %}
            <meta charset="utf-8"/>
            <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>
            {% include 'partials/metadata.html.twig' %}
            <title>
                {% if header.title %}
                    {{ header.title|e('html') }}
                    |
                {% endif %}
                {{ site.title|e('html') }}</title>
            <link rel="icon" type="image/png" href="{{ url('theme://images/favicon.png', true) }}"/>

            {% block stylesheets %}
                {% do assets.add('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css',{'priority': 99, 'media': 'all'}) %}
                {% do assets.add('https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css',{'priority': 98, 'media': 'all'}) %}


                {% do assets.add('theme://css/theme/' ~ site_theme ~ '.css',{'priority': 98, 'media': 'all'}) %}
                {% do assets.add('theme://css/foo.min.css',{'priority': 98, 'media': 'all'}) %}
            {% endblock %}


            <style>
                body {
                    background-image: url('{{ url("theme://images/" ~(theme.image_desktop|first).name) }}') !important;
                }
            </style>

            {% block javascripts %}
                {% do assets.add('https://code.jquery.com/jquery-3.2.1.slim.min.js', {'priority': 101, 'loading': 'async defer'}) %}
                {% do assets.add('https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js', {'priority': 101, 'loading': 'async defer'}) %}
                {% do assets.add('https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js', {'priority': 101, 'loading': 'async defer'}) %}
                {% do assets.add('theme://js/modernizr.custom.71422.js', 100) %}

                {% if browser.getBrowser == 'msie' and browser.getVersion >= 8 and browser.getVersion <= 9 %}
                    {% do assets.add('https://oss.maxcdn.com/respond/1.4.2/respond.min.js') %}
                    {% do assets.add('theme://js/html5shiv-printshiv.min.js') %}
                {% endif %}
            {% endblock %}

            {% block assets deferred %}
                {{ assets.css('head', {'media': 'all'})|raw }}
                {{ assets.js('head', {'loading': 'async defer'})|raw }}
            {% endblock %}

        {% endblock head%}

        {% block trackers %}
            {% if theme.site_trackers %}
                {{ theme.site_trackers|raw }}
            {% endif %}
        {% endblock trackers %}
    </head>

    {% set body_class = theme.config[site_theme].body_class%}
    <body class="{{ body_class }} {% block body_classes %}{{ page.header.body_classes }}{% endblock %}">

        {% block page_header %}
            {% if page.header.show_header is not defined or page.header.show_header == true %}
                {% include 'partials/page_header.html.twig' %}
            {% endif %}
        {% endblock %}
        {% if config.plugins.langswitcher.enabled  %}

            {% include 'partials/langswitcher.html.twig' %}
        {% endif %}
        <div class="container"> {% block content %}{% endblock content %}
            </div>
            {% block page_footer %}
                {% if page.header.show_footer is defined and page.header.show_footer == true %}
                    {% include 'partials/page_footer.html.twig' %}
                {% endif %}
            {% endblock %}

            {% block bottom_js %}
                {{ assets.js('bottom')|raw }}
            {% endblock %}
        </body>
    </html>
</div></body></html></body></html>
